<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="theme-color" content="#7c5cfc">
    {% include 'partials/_analytics.html' %}
    <title>Em Breve - TeleVIP</title>
    <meta name="description" content="Estamos construindo algo incrÃ­vel. Fique ligado nas novidades do TeleVIP!">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700;800&display=swap" rel="stylesheet">
    <link rel="preload" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" as="style" onload="this.onload=null;this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"></noscript>
    <link href="{{ url_for('static', filename='css/coming-soon.css') }}" rel="stylesheet">
    <link rel="icon" type="image/png" href="{{ url_for('static', filename='img/favicon.png') }}">
</head>
<body class="cs-body">

    <!-- Stars -->
    <div class="cs-stars" id="csStars"></div>

    <!-- Navbar -->
    <nav class="cs-nav">
        <a href="{{ url_for('auth.index') }}" class="cs-nav-brand">
            <i class="bi bi-telegram"></i> TeleVIP
        </a>
        <a href="{{ url_for('auth.index') }}" class="cs-nav-back">
            <i class="bi bi-arrow-left"></i> Voltar
        </a>
    </nav>

    <!-- Main -->
    <main class="cs-main">
        <div class="cs-badge">
            <i class="bi bi-cone-striped"></i> Em ConstruÃ§Ã£o
        </div>

        <h1 class="cs-title">
            Estamos construindo algo <span class="cs-gradient">incrÃ­vel</span>
        </h1>
        <p class="cs-subtitle">
            Nossa equipe estÃ¡ trabalhando duro nesta funcionalidade.
            Enquanto isso, ajude os devs eliminando os bugs que aparecem na estaÃ§Ã£o!
        </p>

        <!-- Pixel Art Scene -->
        <div class="cs-scene" id="csScene">
            <!-- Station Wall -->
            <div class="cs-wall"></div>

            <!-- Space Window -->
            <div class="cs-window">
                <div class="cs-window-star" style="top:10px;left:18px;"></div>
                <div class="cs-window-star" style="top:22px;left:55px;animation-delay:.5s;"></div>
                <div class="cs-window-star" style="top:6px;left:90px;animation-delay:1s;"></div>
                <div class="cs-window-star" style="top:30px;left:120px;animation-delay:1.5s;"></div>
                <div class="cs-window-star" style="top:16px;left:40px;animation-delay:.8s;width:1px;height:1px;"></div>
                <div class="cs-window-star" style="top:28px;left:80px;animation-delay:1.2s;width:1px;height:1px;"></div>
                <!-- Planet -->
                <div class="cs-planet">
                    <div class="cs-planet-ring"></div>
                </div>
            </div>

            <!-- Dev 1 (purple) -->
            <div class="cs-desk" style="left:16px;">
                <div class="cs-desk-leg left"></div>
                <div class="cs-desk-leg right"></div>
                <div class="cs-mug" style="right:8px;"></div>
                <div class="cs-monitor">
                    <div class="cs-monitor-screen">
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                    </div>
                    <div class="cs-monitor-stand"></div>
                </div>
            </div>
            <div class="cs-dev" data-color="purple" data-clicks="0" style="left:28px;" onclick="clickDev(this)">
                <div class="cs-dev-head"></div>
                <div class="cs-dev-body"></div>
                <div class="cs-dev-arm left"></div>
                <div class="cs-dev-arm right"></div>
                <div class="cs-dev-legs">
                    <div class="cs-dev-leg" style="background:#2d2654;"></div>
                    <div class="cs-dev-leg" style="background:#2d2654;"></div>
                </div>
            </div>

            <!-- Dev 2 (cyan) -->
            <div class="cs-desk" style="left:33%;transform:translateX(-50%);">
                <div class="cs-desk-leg left"></div>
                <div class="cs-desk-leg right"></div>
                <div class="cs-monitor">
                    <div class="cs-monitor-screen">
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                    </div>
                    <div class="cs-monitor-stand"></div>
                </div>
            </div>
            <div class="cs-dev" data-color="cyan" data-clicks="0" style="left:33%;transform:translateX(-50%);" onclick="clickDev(this)">
                <div class="cs-dev-head"></div>
                <div class="cs-dev-body"></div>
                <div class="cs-dev-arm left" style="animation-delay:.15s;"></div>
                <div class="cs-dev-arm right" style="animation-delay:.45s;"></div>
                <div class="cs-dev-legs">
                    <div class="cs-dev-leg" style="background:#1e3a5f;"></div>
                    <div class="cs-dev-leg" style="background:#1e3a5f;"></div>
                </div>
            </div>

            <!-- Dev 3 (green) -->
            <div class="cs-desk" style="left:66%;transform:translateX(-50%);">
                <div class="cs-desk-leg left"></div>
                <div class="cs-desk-leg right"></div>
                <div class="cs-mug" style="left:8px;"></div>
                <div class="cs-monitor">
                    <div class="cs-monitor-screen">
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                    </div>
                    <div class="cs-monitor-stand"></div>
                </div>
            </div>
            <div class="cs-dev" data-color="green" data-clicks="0" style="left:66%;transform:translateX(-50%);" onclick="clickDev(this)">
                <div class="cs-dev-head"></div>
                <div class="cs-dev-body"></div>
                <div class="cs-dev-arm left" style="animation-delay:.25s;"></div>
                <div class="cs-dev-arm right" style="animation-delay:.55s;"></div>
                <div class="cs-dev-legs">
                    <div class="cs-dev-leg" style="background:#1a3a2e;"></div>
                    <div class="cs-dev-leg" style="background:#1a3a2e;"></div>
                </div>
            </div>

            <!-- Dev 4 (pink) -->
            <div class="cs-desk" style="right:16px;">
                <div class="cs-desk-leg left"></div>
                <div class="cs-desk-leg right"></div>
                <div class="cs-monitor">
                    <div class="cs-monitor-screen">
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                        <div class="cs-code-line"></div>
                    </div>
                    <div class="cs-monitor-stand"></div>
                </div>
            </div>
            <div class="cs-dev" data-color="pink" data-clicks="0" style="right:28px;" onclick="clickDev(this)">
                <div class="cs-dev-head"></div>
                <div class="cs-dev-body"></div>
                <div class="cs-dev-arm left" style="animation-delay:.35s;"></div>
                <div class="cs-dev-arm right" style="animation-delay:.65s;"></div>
                <div class="cs-dev-legs">
                    <div class="cs-dev-leg" style="background:#4a2050;"></div>
                    <div class="cs-dev-leg" style="background:#4a2050;"></div>
                </div>
            </div>

            <!-- Floor -->
            <div class="cs-floor"></div>
        </div>

        <!-- Game hint -->
        <p class="cs-hint" id="csHint">
            <i class="bi bi-bug"></i> Clique nos bugs para eliminÃ¡-los! Clique nos devs para animÃ¡-los.
        </p>

        <!-- Stats -->
        <div class="cs-stats">
            <div class="cs-stat">
                <i class="bi bi-code-slash"></i>
                <span><span class="cs-stat-num green" id="csLines">0</span> linhas</span>
            </div>
            <div class="cs-stat">
                <i class="bi bi-bug"></i>
                <span><span class="cs-stat-num yellow" id="csBugs">0</span> bugs corrigidos</span>
            </div>
            <div class="cs-stat">
                <i class="bi bi-trophy"></i>
                <span><span class="cs-stat-num pink" id="csLevel">1</span> nÃ­vel</span>
            </div>
        </div>

        <!-- Progress bar -->
        <div class="cs-progress">
            <div class="cs-progress-label">
                <span>Progresso da construÃ§Ã£o</span>
                <span id="csPercent">0%</span>
            </div>
            <div class="cs-progress-bar">
                <div class="cs-progress-fill" id="csProgressFill"></div>
            </div>
        </div>

        <!-- CTA -->
        <a href="{{ url_for('auth.index') }}" class="cs-btn">
            <i class="bi bi-house"></i> Voltar Ã  Home
        </a>
    </main>

    <!-- Footer -->
    <footer class="cs-footer">
        &copy; 2024 <a href="{{ url_for('auth.index') }}">TeleVIP</a>. Todos os direitos reservados.
    </footer>

    <!-- Vanilla JS -->
    <script>
    (function(){
        var scene = document.getElementById('csScene');
        var devs = scene.querySelectorAll('.cs-dev');
        var elLines = document.getElementById('csLines');
        var elBugs = document.getElementById('csBugs');
        var elLevel = document.getElementById('csLevel');
        var elPercent = document.getElementById('csPercent');
        var elFill = document.getElementById('csProgressFill');
        var elHint = document.getElementById('csHint');

        // State
        var lines = Math.floor(Math.random()*5000) + 10000;
        var bugsKilled = 0;
        var level = 1;
        var progress = 0;
        var bugColors = ['#ef4444','#f97316','#eab308','#a855f7','#ec4899'];
        var emojis = ['ðŸš€','ðŸ’»','âš¡','ðŸ”¥','âœ¨','ðŸŽ¯','ðŸ’œ','ðŸ›¸','â˜•','ðŸŽ®'];

        // Stars
        var sf = document.getElementById('csStars');
        for(var i = 0; i < 70; i++){
            var s = document.createElement('div');
            s.className = 'cs-star';
            s.style.left = Math.random()*100 + '%';
            s.style.top = Math.random()*100 + '%';
            s.style.setProperty('--dur', (2+Math.random()*4)+'s');
            s.style.setProperty('--bright', (0.4+Math.random()*0.6).toString());
            s.style.animationDelay = (Math.random()*4)+'s';
            if(Math.random()>0.7){ s.style.width='1px'; s.style.height='1px'; }
            sf.appendChild(s);
        }

        // Shooting stars
        function shootingStar(){
            var ss = document.createElement('div');
            ss.className = 'cs-shooting-star';
            ss.style.left = Math.random()*60 + '%';
            ss.style.top = Math.random()*40 + '%';
            ss.style.setProperty('--dx', (150+Math.random()*200)+'px');
            ss.style.setProperty('--dy', (100+Math.random()*150)+'px');
            ss.style.setProperty('--shoot-dur', (0.8+Math.random()*0.6)+'s');
            sf.appendChild(ss);
            setTimeout(function(){ ss.remove(); }, 2000);
        }
        setInterval(shootingStar, 4000 + Math.random()*3000);
        setTimeout(shootingStar, 1500);

        // Code counter
        elLines.textContent = lines.toLocaleString('pt-BR');
        setInterval(function(){
            lines += Math.floor(Math.random()*3) + 1;
            elLines.textContent = lines.toLocaleString('pt-BR');
        }, 600);

        // Progress bar (slowly fills, bugs speed it up)
        function updateProgress(){
            if(progress > 100) progress = 100;
            elFill.style.width = progress + '%';
            elPercent.textContent = Math.floor(progress) + '%';
        }
        setInterval(function(){
            progress += 0.05;
            updateProgress();
        }, 500);

        // ===== BUG SPAWN =====
        function spawnBug(){
            var bug = document.createElement('div');
            bug.className = 'cs-bug';
            var color = bugColors[Math.floor(Math.random()*bugColors.length)];
            bug.style.setProperty('--bug-color', color);

            // Start position: random along edges of scene
            var sceneW = scene.offsetWidth;
            var sceneH = scene.offsetHeight;
            var side = Math.floor(Math.random()*3); // 0=left, 1=right, 2=top
            var startX, startY;
            if(side === 0){ startX = 0; startY = 40 + Math.random()*(sceneH - 90); }
            else if(side === 1){ startX = sceneW - 14; startY = 40 + Math.random()*(sceneH - 90); }
            else { startX = 20 + Math.random()*(sceneW - 40); startY = 70; }

            bug.style.left = startX + 'px';
            bug.style.top = startY + 'px';

            // Crawl direction
            var dx = (Math.random()-0.5) * 200;
            var dy = (Math.random()-0.3) * 120;
            var dur = 3 + Math.random()*4 - level*0.3;
            if(dur < 1.5) dur = 1.5;
            bug.style.setProperty('--dx', dx+'px');
            bug.style.setProperty('--dy', dy+'px');
            bug.style.setProperty('--crawl-dur', dur+'s');

            // Rotation based on movement direction
            var angle = Math.atan2(dy, dx) * (180/Math.PI);
            bug.querySelector || null; // no-op
            var inner = document.createElement('div');
            inner.className = 'cs-bug-body';
            inner.style.transform = 'rotate('+angle+'deg)';
            bug.appendChild(inner);

            // Click to squash
            bug.addEventListener('click', function(e){
                e.stopPropagation();
                squashBug(bug, color);
            });

            scene.appendChild(bug);

            // Auto-remove if not clicked
            setTimeout(function(){
                if(bug.parentNode) bug.remove();
            }, dur*1000 + 500);
        }

        function squashBug(bug, color){
            var rect = bug.getBoundingClientRect();
            var sceneRect = scene.getBoundingClientRect();
            var x = rect.left - sceneRect.left + rect.width/2;
            var y = rect.top - sceneRect.top + rect.height/2;

            // Remove bug
            bug.remove();

            // Splat
            var splat = document.createElement('div');
            splat.className = 'cs-splat';
            splat.style.left = (x-8) + 'px';
            splat.style.top = (y-8) + 'px';
            splat.style.setProperty('--bug-color', color);
            scene.appendChild(splat);
            setTimeout(function(){ splat.remove(); }, 500);

            // Score popup
            var pop = document.createElement('div');
            pop.className = 'cs-score-pop';
            pop.style.left = x + 'px';
            pop.style.top = (y-10) + 'px';
            pop.textContent = '+1';
            scene.appendChild(pop);
            setTimeout(function(){ pop.remove(); }, 700);

            // Screen shake
            scene.classList.remove('shake');
            void scene.offsetWidth;
            scene.classList.add('shake');

            // Update score
            bugsKilled++;
            elBugs.textContent = bugsKilled;
            progress += 0.5;
            updateProgress();

            // Level up every 10 bugs
            var newLevel = Math.floor(bugsKilled / 10) + 1;
            if(newLevel > level){
                level = newLevel;
                elLevel.textContent = level;
                celebrateDevs();
                if(level <= 3) spawnConfetti();
                // Update hint
                var hints = [
                    '',
                    'NÃ­vel 2! Os bugs estÃ£o mais rÃ¡pidos!',
                    'NÃ­vel 3! VocÃª Ã© um caÃ§ador de bugs nato!',
                    'NÃ­vel ' + level + '! LendÃ¡rio!'
                ];
                elHint.innerHTML = '<i class="bi bi-star-fill" style="color:#fbbf24"></i> ' +
                    (hints[Math.min(level-1, hints.length-1)] || hints[hints.length-1]);
            }

            // Random dev celebrates
            if(bugsKilled % 5 === 0){
                var d = devs[Math.floor(Math.random()*devs.length)];
                d.classList.remove('jump');
                void d.offsetWidth;
                d.classList.add('jump');
            }
        }

        // Spawn bugs at interval (faster at higher levels)
        function bugLoop(){
            spawnBug();
            var delay = Math.max(1200, 3500 - level*400) + Math.random()*1500;
            setTimeout(bugLoop, delay);
        }
        setTimeout(bugLoop, 2000);

        // Celebrate all devs
        function celebrateDevs(){
            devs.forEach(function(d){
                d.classList.remove('jump','celebrate');
                void d.offsetWidth;
                d.classList.add('jump');
                d.classList.add('celebrate');
                setTimeout(function(){ d.classList.remove('celebrate'); }, 2500);
            });
            launchRocket();
        }

        // Confetti burst
        function spawnConfetti(){
            var colors = ['#7c5cfc','#38bdf8','#34d399','#fbbf24','#f093fb','#ef4444'];
            for(var i = 0; i < 30; i++){
                var c = document.createElement('div');
                c.className = 'cs-confetti';
                c.style.background = colors[Math.floor(Math.random()*colors.length)];
                c.style.left = (40+Math.random()*20) + 'vw';
                c.style.top = (30+Math.random()*10) + 'vh';
                c.style.setProperty('--cx', (Math.random()-0.5)*300 + 'px');
                c.style.setProperty('--cy', 100+Math.random()*200 + 'px');
                c.style.setProperty('--cr', Math.random()*720-360 + 'deg');
                c.style.setProperty('--fall-dur', 1+Math.random()*1 + 's');
                c.style.animationDelay = Math.random()*0.3 + 's';
                c.style.width = (4+Math.random()*6) + 'px';
                c.style.height = (4+Math.random()*6) + 'px';
                document.body.appendChild(c);
                (function(el){ setTimeout(function(){ el.remove(); }, 2500); })(c);
            }
        }

        // ===== DEV CLICK =====
        window.clickDev = function(dev){
            dev.classList.remove('jump');
            void dev.offsetWidth;
            dev.classList.add('jump');

            // Emoji
            var em = document.createElement('div');
            em.className = 'cs-emoji';
            em.textContent = emojis[Math.floor(Math.random()*emojis.length)];
            dev.appendChild(em);
            setTimeout(function(){ em.remove(); }, 800);

            // Boost lines
            lines += Math.floor(Math.random()*50) + 20;
            elLines.textContent = lines.toLocaleString('pt-BR');

            // Easter egg: 5 clicks on same dev
            var c = parseInt(dev.getAttribute('data-clicks') || '0') + 1;
            dev.setAttribute('data-clicks', c);
            if(c >= 5){
                dev.setAttribute('data-clicks', '0');
                launchRocket();
                spawnConfetti();
            }
        };

        function launchRocket(){
            var r = document.createElement('div');
            r.className = 'cs-rocket';
            r.textContent = 'ðŸš€';
            document.body.appendChild(r);
            setTimeout(function(){ r.remove(); }, 2200);
        }
    })();
    </script>
</body>
</html>
